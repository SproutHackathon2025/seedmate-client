### 1. 주요 도메인

1.  **지역 (Location)**
    - 사용자는 특정 지역을 설정하고, 이 지역을 기반으로 날씨 정보와 농사 조언을 받습니다.
    - 지역 정보는 시/도, 시/군/구, 읍/면/동, 행정 코드, 좌표 등 정적인 데이터를 포함합니다.
    - **주요 기능**: 지역 검색, 특정 지역의 상세 정보 조회.

2.  **날씨 (Weather)**
    - 지정된 지역의 현재 날씨(온도, 습도 등)와 기상 특보(주의보, 경보)를 제공합니다.
    - 날씨 데이터는 외부 API를 통해 실시간으로 가져오는 동적인 정보입니다.
    - 기상 특보는 특정 지역에 일정 기간 동안 유효한 정보입니다.
    - **주요 기능**: 현재 날씨 조회, 기상 특보 조회.

3.  **농사 조언 (Farming Advice)**
    - 날씨, 지역, 계절, 사용자가 등록한 작물 정보를 종합하여 LLM을 통해 맞춤형 조언을 생성합니다.
    - **주요 기능**: 조언 생성.

### 2. 데이터베이스 설계

---

#### **필요 테이블 요약**

| 테이블명       | 설명                  | 주요 역할                                |
| :------------- | :-------------------- | :--------------------------------------- |
| `Regions`      | 전국 행정구역 정보    | 지역 정보의 기준 데이터(Source of Truth) |
| `RegionsCrops` | 행정구역과 작물 매핑  | 지역별 작물 정보를 매핑                  |
| `Crops`        | 작물 마스터 정보      | 시스템에서 선택 가능한 모든 작물 목록    |
| `Advice`       | 생성된 농사 조언 기록 | LLM이 생성한 조언을 저장하고 이력을 관리 |

---

#### **테이블 상세 설계**

**1. `Regions` 테이블**

- 지역 마스터 테이블

| 컬럼명                | 데이터 타입      | 제약 조건       | 설명                         |
| :-------------------- | :--------------- | :-------------- | :--------------------------- |
| `administrative_code` | `VARCHAR(20)`    | **Primary Key** | 행정 코드 (예: '1168010100') |
| `sido`                | `VARCHAR(50)`    | `NOT NULL`      | 시/도                        |
| `sigungu`             | `VARCHAR(50)`    |                 | 시/군/구                     |
| `eupmyeondong`        | `VARCHAR(50)`    |                 | 읍/면/동                     |
| `latitude`            | `DECIMAL(11, 8)` | `NOT NULL`      | 위도                         |
| `longitude`           | `DECIMAL(11, 8)` | `NOT NULL`      | 경도                         |

**2. `Crops` 테이블**

- 작물 마스터 테이블

| 컬럼명        | 데이터 타입    | 제약 조건                         | 설명                             |
| :------------ | :------------- | :-------------------------------- | :------------------------------- |
| `crop_id`     | `INT`          | **Primary Key**, `AUTO_INCREMENT` | 작물 고유 ID                     |
| `name`        | `VARCHAR(100)` | `UNIQUE`, `NOT NULL`              | 작물 이름 (예: '감자', '토마토') |
| `description` | `TEXT`         |                                   | 작물에 대한 설명                 |

**3. `RegionsCrops` 테이블 (Join Table)**

- 어떤 지역에 어떤 작물을 재배하는지 연결하는 테이블

| 컬럼명                | 데이터 타입       | 제약 조건                                          | 설명         |
| :-------------------- | :---------------- | :------------------------------------------------- | :----------- |
| `administrative_code` | `VARCHAR(20)`     | **Foreign Key** (`Users.user_id`)                  | 사용자 ID    |
| `crop_id`             | `INT`             | **Foreign Key** (`Crops.crop_id`)                  | 작물 ID      |
| `created_at`          | `TIMESTAMP`       | `DEFAULT CURRENT_TIMESTAMP`                        | 작물 추가일  |
|                       |                   | **Primary Key** (`administrative_code`, `crop_id`) | 복합 기본 키 |

**4. `Advice` 테이블**

- LLM을 통해 생성된 조언을 저장하는 이력 테이블

| 컬럼명            | 데이터 타입       | 제약 조건                                       | 설명                                          |
| :---------------- | :---------------- | :---------------------------------------------- | :-------------------------------------------- |
| `advice_id`       | `UUID` / `BIGINT` | **Primary Key**                                 | 조언 고유 ID                                  |
| `region_code`     | `VARCHAR(20)`     | **Foreign Key** (`Regions.administrative_code`) | 조언이 생성된 지역의 행정 코드                |
| `advice_content`  | `TEXT`            | `NOT NULL`                                      | 생성된 조언 텍스트                            |
| `request_payload` | `JSON`            | `NOT NULL`                                      | 조언 생성 시 사용된 요청 정보 (날씨, 계절 등) |
| `generated_at`    | `TIMESTAMP`       | `NOT NULL`                                      | 조언 생성 시간                                |
